<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Encuesta de Satisfacción - Secciones</title>
  <link rel="icon" type="image/png" href="https://i.ibb.co/KppgyhQS/LOGO-NSA-REDONDO.png">
  <style>
    :root{--brand:#001c70;--bg:#f5f7fa;--card:#fff;--muted:#6b7280}
    *{box-sizing:border-box}
    body{margin:0;font-family:"Segoe UI",Arial,sans-serif;background:var(--bg)}
    header{background:var(--brand);color:#fff;text-align:center;padding:20px 8px}
    header img{max-height:120px;display:block;margin:0 auto 8px}
    header .title{font-size:20px;font-weight:700}
    .container{max-width:820px;margin:18px auto;background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(10,20,40,0.06)}
    h1{color:var(--brand);text-align:center;margin:6px 0 12px;font-size:22px}
    p.lead{text-align:center;color:var(--muted);margin:6px 0 14px}
    .steps{display:flex;gap:8px;justify-content:center;margin-bottom:12px}
    .dot{width:10px;height:10px;border-radius:50%;background:#e6eefc}
    .dot.active{background:var(--brand);box-shadow:0 4px 8px rgba(0,28,112,0.12)}
    .section{display:none;opacity:0;transform:translateY(8px);transition:all .28s ease}
    .section.active{display:block;opacity:1;transform:none}
    .question{margin:12px 0}
    .question label{display:block;font-weight:700;color:var(--brand);margin-bottom:8px}
    .rating{display:flex;gap:8px;justify-content:space-between;align-items:flex-start}
    .rating .opt{flex:1;display:flex;flex-direction:column;align-items:center;padding:8px 6px;border-radius:8px;cursor:pointer}
    .rating input{display:none}
    .rating .star{font-size:28px;color:#d0d0d0;transition:color .15s, transform .12s}
    .rating input:checked + label .star,
    .rating label:hover .star { color:gold; }
    .rating .text{margin-top:6px;font-size:13px;color:#333}
    .rating-labels{display:flex;justify-content:space-between;max-width:320px;margin:6px auto 14px;font-size:13px;color:#333}
    .radios{display:flex;flex-direction:column;gap:8px}
    .radios label{display:flex;align-items:center;gap:10px;cursor:pointer;padding:6px 8px;border-radius:8px}
    .radios input[type="radio"]{width:18px;height:18px;accent-color:var(--brand)}
    textarea{width:100%;min-height:100px;padding:10px;font-size:14px;border-radius:8px;border:1px solid #d4dbe6;resize:none}
    .nav{display:flex;justify-content:space-between;gap:10px;margin-top:14px}
    .btn{background:var(--brand);color:#fff;border:none;padding:9px 14px;border-radius:9px;cursor:pointer;font-weight:700}
    .btn.secondary{background:transparent;color:var(--brand);border:1px solid rgba(0,28,112,0.12)}
    .note{font-size:13px;color:var(--muted);text-align:center;margin-top:10px}
    @media(max-width:640px){.rating .star{font-size:24px}header img{max-height:80px}.container{margin:12px;padding:12px}}
  </style>
</head>
<body>
  <header>
    <img src="https://i.ibb.co/KppgyhQS/LOGO-NSA-REDONDO.png" alt="Logo">
    <div class="title">Hospital y Clínicas Nuestra Señora de la Asunción</div>
  </header>

  <main class="container" role="main">
    <h1>Encuesta de Satisfacción</h1>
    <p class="lead">Su opinión es valiosa. Encuesta anónima.</p>

    <div class="steps" id="progress"></div>

    <!-- FORM: método clásico (como tu versión original) -->
    <form id="encuesta" action="https://docs.google.com/forms/d/e/1FAIpQLSf36WFK298nEjAUml1T6A1rsH7l_RL5zxDb-xuzWhjMzmI3xQ/formResponse"
          method="POST"
          target="_blank"  novalidate>

      <!-- SECTION 1: RECEPCIÓN -->
      <section class="section active" data-step="0">
        <div class="question">
          <label>1) ¿Cuánto le gusta el chompipe?</label>
          <div class="rating" role="radiogroup" aria-label="Recepción - estrellas">
            <input type="radio" id="rec-1" name="entry.409530246" value="1" required>
            <label class="opt" for="rec-1"><span class="star">★</span><span class="text">Deficiente</span></label>

            <input type="radio" id="rec-2" name="entry.409530246" value="2">
            <label class="opt" for="rec-2"><span class="star">★</span><span class="text">Aceptable</span></label>

            <input type="radio" id="rec-3" name="entry.409530246" value="3">
            <label class="opt" for="rec-3"><span class="star">★</span><span class="text">Regular</span></label>

            <input type="radio" id="rec-4" name="entry.409530246" value="4">
            <label class="opt" for="rec-4"><span class="star">★</span><span class="text">Bueno</span></label>

            <input type="radio" id="rec-5" name="entry.409530246" value="5">
            <label class="opt" for="rec-5"><span class="star">★</span><span class="text">Excelente</span></label>
          </div>
        </div>

        <div class="question">
          <label>2) Chompipe con patas</label>
          <div class="radios" role="radiogroup" aria-label="Recepción - info">
            <label><input type="radio" name="entry.1458327324" value="Sí" required> Sí</label>
            <label><input type="radio" name="entry.1458327324" value="No"> No</label>
            <label><input type="radio" name="entry.1458327324" value="Parcialmente"> Parcialmente</label>
          </div>
        </div>

        <div class="question">
          <label>3) Si la respuesta a la pregunta anterior fue un "No", indique cuál fue la razón y qué recomienda para mejorar la situación.</label>
          <textarea name="entry.2129308771" placeholder="Explique..."></textarea>
        </div>

        <div class="nav">
          <button type="button" class="btn secondary" onclick="go(3)">← Anterior</button>
          <button type="submit" class="btn">Enviar respuestas</button>
        </div>
      </section>

    </form>

    
  </main>

  <script>
    // Sections + progress
    const sections = Array.from(document.querySelectorAll('.section'));
    const progress = document.getElementById('progress');
    sections.forEach((s,i)=> {
      const d = document.createElement('div');
      d.className = 'dot' + (i===0?' active':'');
      d.dataset.i = i;
      d.addEventListener('click', ()=> go(i));
      progress.appendChild(d);
    });

    function show(i){
      sections.forEach((s,idx)=> s.classList.toggle('active', idx===i));
      document.querySelectorAll('.dot').forEach((d,idx)=> d.classList.toggle('active', idx===i));
      const f = sections[i].querySelector('input, textarea, select');
      if(f) f.focus();
      window.scrollTo({top:0, behavior:'smooth'});
    }

    function canAdvance(to){
      if(to <= current) return true;
      const reqs = sections[current].querySelectorAll('[required]');
      for(const el of reqs){
        if(el.type === 'radio'){
          const any = sections[current].querySelectorAll('input[name="'+el.name+'"]:checked');
          if(any.length===0) return false;
        } else if(!el.value) return false;
      }
      return true;
    }

    let current = 0;
    function go(i){
      if(i<0||i>=sections.length) return;
      if(!canAdvance(i)){ alert('Por favor responda las preguntas obligatorias antes de continuar.'); return; }
      current = i; show(i);
    }

    // Init
    show(0);
  </script>
</body>
</html>
